version: "3.3"
services:
  portainer:
    image: portainer/portainer
    container_name: portainer
    restart: always
    command: -H unix:///var/run/docker.sock
    ports:
      - "9000:9000"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ${USERDIR}/docker/portainer/data:/data
      - ${USERDIR}/docker/shared:/shared
    environment:
      - TZ=${TZ}
  organizr:
    container_name: organizr
    restart: always
    image: lsiocommunity/organizr
    volumes:
      - ${USERDIR}/docker/organizr:/config
      - ${USERDIR}/docker/shared:/shared
    ports:
      - "80:80"
    environment:
      - PUID=${PUID}
      - PGID=${PGID}
      - TZ=${TZ}

  webthings-gateway:
    container_name: webthings-gateway
    image: mozillaiot/gateway:latest
    restart: unless-stopped
    network_mode: host
    # "ports" are ignored because of "network_mode: host". Either use "ports"
    # or "network_mode: host".
    #ports:
    #  - "8080:8080"
    #  - "4443:4443"
    environment:
      - "TZ=America/Los_Angeles"
    volumes:
      - /opt/docker/webthings-gateway:/home/node/.mozilla-iot
    logging:
      driver: "json-file"
      options:
        max-size: "1m"
        max-file: "10"
    # If certain devices are needed, e.g. USB dongles, enable them here.
    #devices:
    #  - /dev/ttyUSB0:/dev/ttyUSB0
    #  - /dev/ttyACM0:/dev/ttyACM0
    # If Bluetooth, the container needs to run in privileged mode.
    #privileged: true
